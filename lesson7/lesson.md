Создаем простую kv-базу данных на файлах

- Нужно быстро находить записи по ключу
- Нужно быстро находить записи по имени

Реализация:

- Записи будут ограниченной длины
- Дописываем новые записи в конец файла (с Sync), в индексе храним позиции
- Индекс по первичному ключу храним в памяти в мапе
- Операции с индексом в памяти транслируем в асинхронные операции с файлом индекса (с Sync)
- Удаление - это лишь пометка записи
- Загрузка индекса в память - сортировка на лету
- Поиск по имени будет происходить по файлу, затем по позициям (нужен еще один индекс!)

Обсудим недостатки

Перепишем на postgres
- CREATE INDEX text_b ON textfun(content COLLATE "C") для content LIKE 'mina%'